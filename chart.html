const chart = Highcharts.chart('container', {
    chart: {
        type: 'candlestick',
        zoomType: 'x',
        events: {
            // Update the chart data every 10 seconds
            load: function () {
                const series = this.series[0];
                setInterval(function () {
                    const data = generateData();
                    series.addPoint(data, true, true);
                }, 10000);
            }
        }
    },
    title: {
        text: 'Random Walk Price Chart'
    },
    xAxis: {
        type: 'datetime'
    },
    yAxis: {
        title: {
            text: 'Price'
        }
    },
    series: [{
        name: 'Price',
        data: []
    }]
});

function generateData() {
    const lastDataPoint = chart.series[0].data[chart.series[0].data.length - 1];
    const lastTime = lastDataPoint ? lastDataPoint.x : Date.now();

    // Generate a new price based on a random walk
    const price = lastDataPoint ? lastDataPoint.close + (Math.random() - 0.5) * 2 : 100;
    const data = {
        x: lastTime + 10000, // add 10 seconds to the last time to create a new data point
        open: price,
        high: price + Math.random() * 10,
        low: price - Math.random() * 10,
        close: price + (Math.random() - 0.5) * 20 // add some randomness to the close price
    };
    return data;
}
